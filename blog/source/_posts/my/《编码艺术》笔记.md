---
title: 《编码艺术》笔记
notebook: 08-PMT
tags:
---

《编码艺术》笔记
=================

参考文献：《编写可读性代码的艺术(The.Art.of.Readable.Code-Dustin.Boswell&Trevor.Foucher)》


思想：

* 代码应当易于理解；
* 代码的写法应当使别人理解它所需的时间最小化；


### 1 表面层次改进

目标：选择好的名字、写好的注释以及把代码整洁地写成更好的格式。

#### 1.1 命名

适当地将完整信息封装到名字中，使每个名字含义具体、清晰、精确、有表现力。  

* 驼峰格式；
* 常量/宏大写，使用下划线分隔，如google代码库修改的DISALLOW_COPY_AND_ASSIGN(ClassName)；
* 附带其他重要属性，如以毫秒为单位的time_ms；
* 不要有歧义；

#### 1.2 注释

注释是为了帮助读者完全理解作者的意图。  
多替读者想一想，他们需要知道什么，什么地方会有疑惑，什么地方会出错。

* 好的注释，言简意赅，在有需要的地方出现；
* 不要用注释来掩饰代码缺陷。好代码>坏代码+好注释；
* 意义很明显的代码不需要注释；
* 常量加注释；
* 避免嵌套注释；
* 多使用//，少使用/**/；
* 为代码中的瑕疵写注释，常用标记

|标记|意义|  
|:--|:--|  
|TODO|未处理|  
|FIXME|已知的无法运行的代码|  
|HACK|对一个问题不得不采用的比较粗糙的解决方案|  
|XXX|危险！这里有重要问题|  

###2 简化逻辑

目标：把条件、循环以及其他队控制流的改变做得“自然”。

#### 2.1 控制流改变

* 条件语句中的参数顺序

|左边|右边|
|:--|:--|
|被询问的表达式，其值倾向于不断变化|被比较的表达式，其值倾向于常量|

使用“==”时，最好左边常量，右边被询问表达式。

* 避免三目运算符，在最简单的情况下使用；
* 避免do/while循环；
* 从函数中提前return；
* if-else避免嵌套，可用return提早返回;
* 减少循环内嵌套，可用continue提早返回；

#### 2.2 拆分超长的表达式

* 使用总结变量；
* 使用德摩根定律；

#### 2.3 变量

* 减少控制流变量；
* 缩小变量作用域；

### 3 重新组织代码

积极抽取不相关的子问题，即问题单位化；  

* 应该把代码组织得一次只做一件事情；
* 提高代码重用性。



